<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Title of the document</title>
    <style>
        html {
            background: #451799;
        }

        .shape {
            position: absolute;
        }

        .pool svg {
            transform: scale(.6);
        }
    </style>
</head>

<body>

    <div style="position:relative; top:300px; left: 500px">
        <div class="tally" id="tally_character_inner">
            <div class="tally" id="tally_body"><svg id="tally-svg" class="tally" viewBox="0 0 914 814" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <defs></defs>
                    <path class="tally tallySkinBack" fill="#C308C1" d="M652.5,793.8l255.5-281L565.2,127.6l-307.3,35L5,366l88.5,346.8L652.5,793.8z"></path>
                    <path class="tally tallySkinBackPattern" fill="url(#tallyPattern)" d="M652.5,793.8l255.5-281L565.2,127.6l-307.3,35L5,366l88.5,346.8L652.5,793.8z"></path>
                    <path class="tally tallySkinFront" fill="#D32CF1" d="M199.8,809l419.9-139.2l126.5,10.1l161.9-319L690.5,14.1L509.8,36.2L450.2,4L258.3,66.9l-190,23.2 l-17.7,443L199.8,809z"></path>
                    <path class="tally tallySkinFrontPattern" fill="url(#tallyPattern)" d="M199.8,809l419.9-139.2l126.5,10.1l161.9-319L690.5,14.1L509.8,36.2L450.2,4L258.3,66.9l-190,23.2 l-17.7,443L199.8,809z"></path>
                </svg></div>
            <div class="tally" id="tally_eyes">
                <span class="tally tally_lid">
                    <span class="tally tally_eye tally_eye_left" style="transform: rotate(54.3636deg); left:-20px">
                        <span class="tally tally_eye_pupil tally_eye_pupil_active"></span></span></span>
                <span class="tally tally_lid">
                    <span class="tally tally_eye tally_eye_right" style="transform: rotate(52.8103deg);">
                        <span class="tally tally_eye_pupil tally_eye_pupil_active"></span></span></span></div>
        </div>
    </div>


    <div class="pool"></div>










    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.0/anime.min.js"></script>
    <script>
        var pool = {

            triangle: `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="3.014in" height="2.319in">
<path fill-rule="evenodd" fill="rgb(47, 47, 47)" d="M106.509,0.594 L216.258,166.386 L0.262,166.386 L106.509,0.594 Z" />
</svg>`,

            check: `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.819in" height="1.417in">
<path fill-rule="evenodd" fill="rgb(92, 99, 112)"
d="M130.768,21.983 L72.897,80.250 L72.955,80.309 L55.660,97.604 L55.618,97.646 L55.618,97.646 L51.490,101.774 L0.304,50.588 L21.770,29.123 L51.535,58.888 L109.753,0.967 L130.768,21.983 Z" />
</svg>`,

            checkCircle: `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="4.181in" height="4.181in">
<path fill-rule="evenodd" fill="rgb(92, 99, 112)"
d="M295.392,111.975 C316.810,191.910 269.374,274.072 189.439,295.491 C109.505,316.909 27.342,269.472 5.924,189.538 C-15.494,109.604 31.942,27.441 111.877,6.022 C191.811,-15.396 273.974,32.041 295.392,111.975 ZM127.711,68.387 L166.671,89.499 L135.544,143.413 L239.225,203.273 L217.676,240.599 L75.034,159.627 L127.711,68.387 Z" />
</svg>`,

            image: `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="5.528in" height="3.861in">
<path fill-rule="evenodd" fill="rgb(77, 82, 87)"
d="M0.126,0.451 L397.812,0.451 L397.812,277.111 L0.126,277.111 L0.126,0.451 ZM138.000,122.000 L32.000,230.000 L364.000,230.000 L290.000,154.000 L231.000,214.000 L138.000,122.000 ZM226.113,76.211 C241.264,76.211 253.547,88.670 253.547,104.040 C253.547,119.409 241.264,131.869 226.113,131.869 C210.962,131.869 198.680,119.409 198.680,104.040 C198.680,88.670 210.962,76.211 226.113,76.211 Z" />
</svg>`,

            circle: `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="2.625in" height="2.625in">
<path fill-rule="evenodd" fill="rgb(47, 47, 47)"
d="M131.135,8.246 C178.837,28.400 201.171,83.407 181.017,131.110 C160.864,178.812 105.856,201.145 58.153,180.992 C10.451,160.839 -11.882,105.831 8.271,58.129 C28.425,10.426 83.433,-11.907 131.135,8.246 Z" />
</svg>`,

            threeDots: `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="3.917in" height="1in">
<path fill-rule="evenodd" fill="rgb(47, 47, 47)"
d="M246.102,71.867 C226.435,71.867 210.492,55.924 210.492,36.257 C210.492,16.590 226.435,0.647 246.102,0.647 C265.769,0.647 281.712,16.590 281.712,36.257 C281.712,55.924 265.769,71.867 246.102,71.867 ZM141.023,71.867 C121.356,71.867 105.413,55.924 105.413,36.257 C105.413,16.590 121.356,0.647 141.023,0.647 C160.690,0.647 176.633,16.590 176.633,36.257 C176.633,55.924 160.690,71.867 141.023,71.867 ZM35.943,71.867 C16.276,71.867 0.333,55.924 0.333,36.257 C0.333,16.590 16.276,0.647 35.943,0.647 C55.610,0.647 71.553,16.590 71.553,36.257 C71.553,55.924 55.610,71.867 35.943,71.867 Z" />
</svg>`,

            link: `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="3.736in" height="2.556in">
<path fill-rule="evenodd" fill="rgb(77, 82, 87)"
d="M243.293,94.113 L201.444,114.510 C181.178,124.387 157.178,117.839 144.505,100.076 L134.464,104.970 C140.646,125.896 131.019,148.834 110.752,158.712 L68.904,179.108 C46.314,190.118 19.078,180.731 8.068,158.143 L4.741,151.316 C-6.269,128.728 3.118,101.491 25.707,90.481 L67.556,70.084 C86.789,60.710 109.384,66.130 122.471,81.888 L133.712,76.409 C129.363,56.393 139.014,35.256 158.247,25.882 L200.096,5.485 C222.685,-5.524 249.922,3.862 260.932,26.451 L264.259,33.277 C275.269,55.866 265.882,83.103 243.293,94.113 ZM78.920,91.062 L35.230,112.356 C24.308,117.679 19.769,130.849 25.093,141.771 L26.701,145.071 C32.025,155.994 45.194,160.532 56.116,155.209 L99.806,133.915 C107.059,130.380 111.473,123.381 112.077,115.881 L107.842,117.945 C101.884,120.849 94.701,118.373 91.798,112.416 L90.920,110.615 C88.016,104.658 90.492,97.474 96.450,94.571 L100.685,92.507 C94.405,88.362 86.173,87.527 78.920,91.062 ZM242.484,39.901 L240.875,36.600 C235.551,25.679 222.382,21.140 211.460,26.463 L167.770,47.757 C160.517,51.292 156.103,58.291 155.499,65.791 L158.117,64.514 C164.075,61.611 171.259,64.087 174.162,70.044 L175.039,71.845 C177.943,77.802 175.467,84.985 169.510,87.889 L166.891,89.165 C173.171,93.310 181.403,94.145 188.657,90.610 L232.346,69.316 C243.268,63.993 247.807,50.823 242.484,39.901 Z" />
</svg>`,

            zigzag: `<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="3.653in" height="5.889in">
<path fill-rule="evenodd" fill="rgb(110, 118, 130)"
d="M226.081,159.135 L226.062,158.981 L145.427,169.119 L155.526,249.445 L155.649,249.429 L160.087,285.721 L160.192,286.560 L123.341,291.066 L123.321,290.912 L42.341,301.093 L57.192,419.217 L20.341,423.724 L0.925,269.294 L1.268,269.252 L1.218,268.845 L118.690,254.076 L108.591,173.750 L108.466,173.766 L103.959,136.914 L103.959,136.914 L103.924,136.636 L140.776,132.130 L140.795,132.283 L221.430,122.145 L206.665,4.705 L243.517,0.198 L258.266,117.513 L258.389,117.498 L262.825,153.774 L262.933,154.629 L226.081,159.135 Z" />
</svg>`,





        }





        var total = 0,
            w = window.innerWidth,
            h = $(window.top).height(),
            poolArr = Object.keys(pool),
            shapesInPool = [],
            colors = [
                '451799', '7ace2e', '49c8da', 'cb41f1', 'eeac20', 'ed8b00', 'd64934', '282c34', '5c6370', '9096a3'
            ];

        function randomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1) + min);
        }
        function randomFloat(min, max) {
            return Math.random() * (max - min) + min;
        }


        function addToPool(num = 20) {
            var key = "",
                str = "",
                name = "",
                html = "";
            for (var i = 0; i < num; i++) {
                key = poolArr[Math.floor(Math.random() * poolArr.length)];
                str = pool[key];
                name = key + (total++);
                // add to pool
                html += "<div class='shape " + name + "' style='left: " + (w + 500) + "px;'>" + str + "</div>";
                // add to reference
                shapesInPool.push(name);
            }
            $(".pool").append(html);
            console.log(shapesInPool);
        }
        addToPool(40);

        function launchFromPool() {

            var obj = {
                name: shapesInPool.shift(), // get last element
                startX: (w + 500),
                startY: (Math.random() * h)-200,
                endX: -500
            }



            // viewBox="0 0 60 55" height="50"

            // put in new position
            $("." + obj.name).css({
                "top": obj.startY,
                "z-index": randomInt(-10,10)
            });
            $("." + obj.name + " > svg").css({
                "transform": "scale(" + randomFloat(.3,.8) + ")"
            });
            $("." + obj.name + " > svg > path").css({
                "fill": "#" + colors[Math.floor(Math.random() * colors.length)]
            });

            anime({
                targets: '.' + obj.name,
                left: obj.endX + "px",
                rotate: randomInt(-90, 90),
                duration: 10000,
                easing: 'linear'
            });

            // add element to beginning of array
            shapesInPool.push(obj.name);
        }


        function checkForEnd() {

            for (var i = 0; i < shapesInPool.length; i++) {
                if ($("." + shapesInPool[i]).offset().left < -400){
                    // reset
                    $("." + shapesInPool[i]).css({
                        left: (w + 500) + "px",
                    })
                }
            }
        }


        var myInt = setInterval(function() {
            launchFromPool();
            checkForEnd();
        }, 200);


        // add floating animation
        tallyBattleFloatingAnim = anime({
            targets: "#tally_character_inner",
            translateY: 5,
            direction: 'alternate',
            loop: true,
            easing: 'easeInOutSine'
        });
    </script>

</body>

</html>
